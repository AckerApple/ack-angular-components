import { stringToXml } from "./stringToXml.function.ts";
export class BaseDmFileReader {
    async readXmlFirstElementContentByTagName(tagName) {
        const elements = await this.readXmlElementsByTagName(tagName);
        return elements.find(tag => tag.textContent)?.textContent;
    }
    async readXmlElementsByTagName(tagName) {
        const xml = await this.readAsXml();
        return new Array(...xml.getElementsByTagName(tagName));
    }
    async readXmlFirstElementByTagName(tagName) {
        const xml = await this.readAsXml();
        const elements = new Array(...xml.getElementsByTagName(tagName));
        return elements.length ? elements[0] : undefined;
    }
    async readAsXml() {
        const string = await this.readAsText();
        return stringToXml(string);
    }
    async readAsJson() {
        return JSON.parse(await this.readAsText());
    }
    readAsText() {
        throw new Error('no override provided for BaseDmFileReader.readAsText');
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlyZWN0b3J5TWFuYWdlcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZGlyZWN0b3J5LW1hbmFnZXJzL0RpcmVjdG9yeU1hbmFnZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQTtBQTRCdkQsTUFBTSxPQUFPLGdCQUFnQjtJQUMzQixLQUFLLENBQUMsbUNBQW1DLENBQUMsT0FBZTtRQUN2RCxNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUM3RCxPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFFLEVBQUUsV0FBVyxDQUFBO0lBQzVELENBQUM7SUFFRCxLQUFLLENBQUMsd0JBQXdCLENBQUMsT0FBZTtRQUM1QyxNQUFNLEdBQUcsR0FBRyxNQUFNLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUNsQyxPQUFPLElBQUksS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBUSxDQUFDLENBQUE7SUFDL0QsQ0FBQztJQUVELEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxPQUFlO1FBQ2hELE1BQU0sR0FBRyxHQUFHLE1BQU0sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ2xDLE1BQU0sUUFBUSxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBUSxDQUFDLENBQUE7UUFDdkUsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQTtJQUNsRCxDQUFDO0lBRUQsS0FBSyxDQUFDLFNBQVM7UUFDYixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQTtRQUN0QyxPQUFPLFdBQVcsQ0FBRSxNQUFNLENBQUUsQ0FBQTtJQUM5QixDQUFDO0lBRUQsS0FBSyxDQUFDLFVBQVU7UUFDZCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQTtJQUM1QyxDQUFDO0lBRUQsVUFBVTtRQUNSLE1BQU0sSUFBSSxLQUFLLENBQUMsc0RBQXNELENBQUMsQ0FBQTtJQUN6RSxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdHJpbmdUb1htbCB9IGZyb20gXCIuL3N0cmluZ1RvWG1sLmZ1bmN0aW9uLnRzXCJcblxuZXhwb3J0IGludGVyZmFjZSBEaXJlY3RvcnlNYW5hZ2VyIHtcbiAgcGF0aDogc3RyaW5nXG4gIGdldERpcmVjdG9yeTogKHBhdGg6IHN0cmluZywgb3B0aW9ucz86IEZpbGVTeXN0ZW1HZXREaXJlY3RvcnlPcHRpb25zKSA9PiBQcm9taXNlPERpcmVjdG9yeU1hbmFnZXI+XG4gIFxuICBsaXN0OiAoKSA9PiBQcm9taXNlPHN0cmluZ1tdPlxuICBsaXN0RmlsZXM6ICgpID0+IFByb21pc2U8c3RyaW5nW10+XG4gIGxpc3RGb2xkZXJzOiAoKSA9PiBQcm9taXNlPHN0cmluZ1tdPlxuICBcbiAgZ2V0Rm9sZGVyczogKCkgPT4gUHJvbWlzZTxEaXJlY3RvcnlNYW5hZ2VyW10+XG4gIGdldEZpbGVzOiAoKSA9PiBQcm9taXNlPERtRmlsZVJlYWRlcltdPlxuICBmaW5kRmlsZUJ5UGF0aDogKHBhdGg6IHN0cmluZykgPT4gUHJvbWlzZTxEbUZpbGVSZWFkZXIgfCB1bmRlZmluZWQ+XG4gIGZpbGU6IChmaWxlTmFtZTogc3RyaW5nLCBvcHRpb25zPzogRmlsZVN5c3RlbUdldEZpbGVPcHRpb25zKSA9PiBQcm9taXNlPERtRmlsZVJlYWRlcj5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEbUZpbGVSZWFkZXIge1xuICBkaXJlY3Rvcnk6IERpcmVjdG9yeU1hbmFnZXJcbiAgbmFtZTogc3RyaW5nXG4gIHdyaXRlOiAoZmlsZVN0cmluZzogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+XG4gIHJlYWRBc1RleHQ6ICgpID0+IFByb21pc2U8c3RyaW5nPlxuICByZWFkQXNKc29uOiAoKSA9PiBQcm9taXNlPE9iamVjdD5cbiAgcmVhZEFzWG1sOiAoKSA9PiBQcm9taXNlPERvY3VtZW50PlxuICByZWFkWG1sRmlyc3RFbGVtZW50QnlUYWdOYW1lOiAodGFnTmFtZTogc3RyaW5nKSA9PiBQcm9taXNlPEVsZW1lbnQgfCB1bmRlZmluZWQ+XG4gIHJlYWRYbWxFbGVtZW50c0J5VGFnTmFtZTogKHRhZ05hbWU6IHN0cmluZykgPT4gUHJvbWlzZTxFbGVtZW50W10+XG4gIHJlYWRYbWxGaXJzdEVsZW1lbnRDb250ZW50QnlUYWdOYW1lOiAodGFnTmFtZTogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ+XG59XG5cbmV4cG9ydCBjbGFzcyBCYXNlRG1GaWxlUmVhZGVyIHtcbiAgYXN5bmMgcmVhZFhtbEZpcnN0RWxlbWVudENvbnRlbnRCeVRhZ05hbWUodGFnTmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBhd2FpdCB0aGlzLnJlYWRYbWxFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKVxuICAgIHJldHVybiBlbGVtZW50cy5maW5kKHRhZyA9PiB0YWcudGV4dENvbnRlbnQgKT8udGV4dENvbnRlbnRcbiAgfVxuXG4gIGFzeW5jIHJlYWRYbWxFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lOiBzdHJpbmcpOiBQcm9taXNlPEVsZW1lbnRbXT4ge1xuICAgIGNvbnN0IHhtbCA9IGF3YWl0IHRoaXMucmVhZEFzWG1sKClcbiAgICByZXR1cm4gbmV3IEFycmF5KC4uLnhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKSBhcyBhbnkpXG4gIH1cblxuICBhc3luYyByZWFkWG1sRmlyc3RFbGVtZW50QnlUYWdOYW1lKHRhZ05hbWU6IHN0cmluZyk6IFByb21pc2U8RWxlbWVudCB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IHhtbCA9IGF3YWl0IHRoaXMucmVhZEFzWG1sKClcbiAgICBjb25zdCBlbGVtZW50cyA9IG5ldyBBcnJheSguLi54bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnTmFtZSkgYXMgYW55KVxuICAgIHJldHVybiBlbGVtZW50cy5sZW5ndGggPyBlbGVtZW50c1swXSA6IHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgcmVhZEFzWG1sKCk6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICBjb25zdCBzdHJpbmcgPSBhd2FpdCB0aGlzLnJlYWRBc1RleHQoKVxuICAgIHJldHVybiBzdHJpbmdUb1htbCggc3RyaW5nIClcbiAgfVxuICBcbiAgYXN5bmMgcmVhZEFzSnNvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGF3YWl0IHRoaXMucmVhZEFzVGV4dCgpKVxuICB9XG4gIFxuICByZWFkQXNUZXh0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdubyBvdmVycmlkZSBwcm92aWRlZCBmb3IgQmFzZURtRmlsZVJlYWRlci5yZWFkQXNUZXh0JylcbiAgfVxufVxuIl19