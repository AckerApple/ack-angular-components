{"version":3,"file":"ack-angular-components.mjs","sources":["../../src/directory-managers/readFileStream.function.ts","../../src/directory-managers/stringToXml.function.ts.ts","../../src/directory-managers/DmFileReader.ts","../../src/directory-managers/BrowserDmFileReader.ts","../../src/directory-managers/DirectoryManagers.ts","../../src/directory-managers/directoryReadToArray.function.ts","../../src/directory-managers/path.ts","../../src/directory-managers/BrowserDirectoryManagers.ts","../../src/directory-managers/convertSlashes.ts","../../src/directory-managers/Neutralino.streams.ts","../../src/directory-managers/NeutralinoDmFileReader.ts","../../src/directory-managers/NeutralinoDirectoryManager.ts","../../src/directory-managers/SafariDirectoryManagers.ts","../../src/components/robust-select-directory/robust-select-directory.component.ts","../../src/components/robust-select-directory/robust-select-directory.component.html","../../src/declarations.ts","../../src/AckComponentsModule.ts","../../src/ack-angular-components.ts"],"sourcesContent":["import { DmFileReader, streamCallback, StreamOptions, StreamStats } from \"./DmFileReader\"\n\n/**  This function reads a file from the user's file system and returns an Observable that emits slices of the file */\nexport function readFileStream(\n  file: File,\n  chunkSize: number = 1024 * 1024, // 1MB,\n  eachString: streamCallback = (string: string) => undefined,\n  {awaitEach=false}: StreamOptions = {}\n): Promise<void> {\n  const fileSize = file.size\n  let offset = 0\n  let stopped = false\n\n  return new Promise<void>((res, rej) => {\n    const stop = () => {\n      stopped = true\n    }\n    const cancel = stop\n  \n    /** onload means when data loaded not just the first time */\n    const onread = async (result: string) => {\n      const promise = eachString(\n        result as string, {\n          isLast: (offset + chunkSize) >= fileSize,\n          percent: offset / fileSize * 100,\n          offset,\n          stop,\n          cancel\n        }\n      )\n\n      if ( awaitEach ) {\n        await promise\n      }\n      \n      // increment\n      offset += chunkSize\n \n      if (!stopped && offset < fileSize) {\n        readSlice()\n      } else {\n        res()\n      }\n    }\n\n\n    function readSlice() {\n      const slice = file.slice(offset, offset + chunkSize) // comes back as Blob\n      \n      // convert Blob to string\n      slice.text().then(fileContent => onread(fileContent)).catch(e => rej(e))\n    }\n\n    readSlice()\n  })\n}\n\nexport async function readWriteFile(\n  file: DmFileReader,\n  fileHandle: FileSystemFileHandle,\n  transformFn: (\n    chunk: string,\n    stats: StreamStats\n  ) => string, // aka callback\n  chunkSize = 1024 * 1024, // 1 MB\n  options?: StreamOptions\n): Promise<void> {\n  const writableStream = await fileHandle.createWritable() // Open a writable stream for the file\n  const onString: streamCallback = async (string, stats) => {\n    const originalStop = stats.stop\n    stats.stop = () => {\n      originalStop() // call the stop we are wrapping\n      writableStream.close()\n    }\n    stats.cancel = () => {\n      originalStop() // call the stop we are wrapping\n      writableStream.abort()\n    }\n        \n    return writableStream.write(\n      await transformFn(string, stats)\n    )\n  }\n  \n  await file.readTextStream(onString, chunkSize, options)\n  await writableStream.close()\n  writableStream.truncate\n}\n","export function stringToXml(string: string) {\n  return new DOMParser().parseFromString(string.trim(), \"text/xml\")\n}\n","import { DirectoryManager, FileStats } from \"./DirectoryManagers\"\nimport { stringToXml } from \"./stringToXml.function.ts\"\n\nexport interface StreamStats {\n  offset: number\n  percent: number\n  isLast: boolean\n  stop: () => unknown // a function to allow caller to call for a stop of file streaming. During file write this will cause an incomplete file (use cancel instead)\n  cancel: () => unknown // a function to allow caller to call for a stop of file streaming. During file write this will prevent writing an incomplete file\n}\n\nexport type streamCallback = (\n  string: string,\n  stats: StreamStats\n) => any\n\nexport interface StreamOptions {\n  awaitEach?: boolean\n}\n\nexport interface DmFileReader {\n  directory: DirectoryManager\n  name: string\n  \n  write: (fileString: string | ArrayBuffer) => Promise<void>\n  readWriteTextStream: (\n    callback: streamCallback,\n    chunkSize?: number, // 1 MB should be default\n    options?: StreamOptions\n  ) => Promise<void>\n  \n\n  readAsText: () => Promise<string>\n  readTextStream: (\n    callback: streamCallback,\n    chunkSize?: number, // default 1024\n    options?: StreamOptions\n  ) => Promise<void>\n  readAsJson: () => Promise<Object>\n  readAsDataURL: () => Promise<string>\n  readAsXml: () => Promise<Document>\n  readXmlFirstElementByTagName: (tagName: string) => Promise<Element | undefined>\n  readXmlElementsByTagName: (tagName: string) => Promise<Element[]>\n  readXmlFirstElementContentByTagName: (tagName: string) => Promise<string | null | undefined>\n\n  stats: () => Promise<FileStats>\n}\n\nexport class BaseDmFileReader {\n  async readXmlFirstElementContentByTagName(tagName: string): Promise<string | null | undefined> {\n    const elements = await this.readXmlElementsByTagName(tagName)\n    return elements.find(tag => tag.textContent )?.textContent\n  }\n\n  async readXmlElementsByTagName(tagName: string): Promise<Element[]> {\n    const xml = await this.readAsXml()\n    return new Array(...xml.getElementsByTagName(tagName) as any)\n  }\n\n  async readXmlFirstElementByTagName(tagName: string): Promise<Element | undefined> {\n    const xml = await this.readAsXml()\n    const elements = new Array(...xml.getElementsByTagName(tagName) as any)\n    return elements.length ? elements[0] : undefined\n  }\n\n  async readAsXml(): Promise<Document> {\n    const string = await this.readAsText()\n    return stringToXml( string )\n  }\n  \n  async readAsJson(): Promise<string> {\n    return JSON.parse(await this.readAsText())\n  }\n  \n  readAsText(): Promise<string> {\n    throw new Error('no override provided for BaseDmFileReader.readAsText')\n  }\n}\n","import { readFileStream, readWriteFile } from \"./readFileStream.function\"\nimport { BaseDmFileReader, DmFileReader, StreamOptions, streamCallback } from \"./DmFileReader\"\nimport { DirectoryManager } from \"./DirectoryManagers\"\n\nexport class BrowserDmFileReader extends BaseDmFileReader implements DmFileReader {\n  name: string\n\n  constructor(\n    public file: File | FileSystemFileHandle,\n    public directory: DirectoryManager\n  ) {\n    super()\n    this.name = file.name\n  }\n\n  async stats() {\n    return this.getRealFile()\n  }\n\n  async readTextStream(\n    callback: streamCallback,\n    chunkSize: number = 1024,\n    options?: StreamOptions,\n  ): Promise<void> {\n    const file = await this.getRealFile()\n    return readFileStream(file, chunkSize, callback, options)\n  }\n\n  async readWriteTextStream(\n    callback: streamCallback,\n    chunkSize: number = 1024 * 1024, // 1 MB\n    options?: StreamOptions,\n  ): Promise<void> {\n    const handle = this.file as FileSystemFileHandle\n    return readWriteFile(this, handle, callback, chunkSize, options)\n  }\n\n  async write(fileString: string | ArrayBuffer) {\n    let writableStream: any\n    const likeFile: any = this.file\n    const hasPermission = likeFile.queryPermission && await likeFile.queryPermission() === 'granted'\n\n    if ( hasPermission ) {\n      writableStream = await likeFile.createWritable()\n    } else {\n      // request where to save\n      const id = this.name.replace(/[^a-zA-Z0-9]/g,'-')+'-filePicker'\n      const savePickerOptions = {\n        suggestedName: this.name,\n        /*\n        // todo: may need to use mime types\n        types: [{\n          description: 'JSON',\n          accept: {\n            'application/json': ['.json'],\n          },\n        }],\n        */\n      }\n\n      // below, thought to remember last matching file (i think data typing is just missing for it)\n      ;(savePickerOptions as any).id = id.slice(0, 32)\n\n      const handle = await window.showSaveFilePicker(savePickerOptions)\n      \n      writableStream = await handle.createWritable()\n    }\n\n\n    // write our file\n    await writableStream.write( fileString )\n\n    // close the file and write the contents to disk.\n    await writableStream.close()\n  }\n\n  private async getRealFile(): Promise<File> {\n    const file = this.file as any\n    return file.getFile ? await file.getFile() : Promise.resolve(file)\n  }\n  \n  override readAsText(): Promise<string> {\n    return new Promise(async (res, rej) => {\n      try {\n        const reader = new FileReader()\n        const file = await this.getRealFile()\n        reader.readAsArrayBuffer\n        reader.readAsText(file)\n        reader.onload = () => res(reader.result as string)\n      } catch (err) {\n        rej(err)\n      }\n    })\n  }\n\n  readAsDataURL(): Promise<string> {\n    return new Promise(async (res, rej) => {\n      try {\n        var reader = new FileReader()\n        const file = await this.getRealFile()\n        reader.readAsDataURL(file)\n        reader.onload = () => {\n          const result = reader.result as string\n          // remove `data:application/json;base64,`\n          // remove `data:image/png;base64,`\n          // const replaced = result.replace(/^.+,/,'')\n          res(result)\n        }\n      } catch (err) {\n        rej(err)\n      }\n    })\n  }\n}\n","import { DmFileReader } from \"./DmFileReader\"\n\nexport interface DirectoryManager {\n  name: string\n  path: string\n\n  createDirectory: (\n    path: string\n  ) => Promise<DirectoryManager>\n\n  // should throw error if directory does not exist\n  getDirectory: (\n    path: string,\n    options?: FileSystemGetDirectoryOptions\n  ) => Promise<DirectoryManager>\n  \n  // should return undefined if directory does not exist\n  findDirectory: (\n    path: string,\n    options?: FileSystemGetDirectoryOptions\n  ) => Promise<DirectoryManager | undefined>\n  \n  list: () => Promise<string[]>\n  listFiles: () => Promise<string[]>\n  listFolders: () => Promise<string[]>\n  \n  getFolders: () => Promise<DirectoryManager[]>\n  getFiles: () => Promise<DmFileReader[]>\n  findFileByPath: (path: string) => Promise<DmFileReader | undefined>\n  file: (\n    fileName: string,\n    options?: FileSystemGetFileOptions\n  ) => Promise<DmFileReader>\n\n  renameFile: (\n    oldFileName: string,\n    newfileName: string,\n    options?: FileSystemGetFileOptions\n  ) => Promise<DmFileReader>\n\n  copyFile: (\n    oldFileName: string,\n    newfileName: string,\n    options?: FileSystemGetFileOptions\n  ) => Promise<DmFileReader>\n\n  removeEntry: (\n    name: string,\n    options?: { recursive: boolean }\n  ) => Promise<void>\n}\n\nexport interface FileStats {\n  lastModified: number\n  lastModifiedDate?: Date\n  name: string\n  size: number // 788\n  type: string // \"application/json\"\n}\n\nexport function getNameByPath(path: string) {\n  const half = path.split(/\\//).pop() as string\n  return half.split(/\\\\/).pop() as string\n}\n\nexport async function findDirectoryWithin(\n  path: string,\n  inDir: DirectoryManager,\n  options?: FileSystemGetDirectoryOptions,\n): Promise<DirectoryManager | undefined> {\n  const pathSplit = path.split('/').filter(x => x)\n  \n  if ( pathSplit.length >= 1 ) {\n    const firstParent = pathSplit.shift() as string // remove index 0 of firstParent/firstParent/file.xyz\n    \n    try {\n      const parent = await inDir.getDirectory(firstParent)\n      if ( !parent ) {\n        return // undefined\n      }\n      return await findDirectoryWithin(pathSplit.join('/'), parent, options)\n    } catch (err) {\n      const folderList = await inDir.listFolders()\n      if ( folderList.includes(firstParent) ) {\n        throw err // rethrow because its not about a missing folder\n      }\n\n      return // our folderList does not contain what we are looking for\n    }\n  }\n\n  return inDir // return last result\n}\n\nexport async function renameFileInDir(\n  oldFileName: string,\n  newFileName: string,\n  dir: DirectoryManager\n): Promise<DmFileReader> {\n  const newFile = await copyFileInDir(oldFileName, newFileName, dir)\n  await dir.removeEntry(oldFileName)\n  return newFile\n}\n\nexport async function copyFileInDir(\n  oldFileName: string,\n  newFileName: string,\n  dir: DirectoryManager\n): Promise<DmFileReader> {\n  const oldFile = await dir.file(oldFileName)\n  const data = await oldFile.readAsText()\n  const newFile = await dir.file(newFileName, { create: true })\n  await newFile.write(data)\n  return newFile\n}\n\nexport async function getDirForFilePath(\n  path: string,\n  fromDir: DirectoryManager,\n  options?: FileSystemGetDirectoryOptions,\n) {\n  const pathSplit = path.split(/\\\\|\\//)\n  pathSplit.pop() as string // remove the file\n  const pathWithoutFile = pathSplit.join('/')\n\n  return await fromDir.getDirectory(pathWithoutFile, options)\n}\n","export async function directoryReadToArray(\n  // directory: FileSystemFileHandle[] //LikeFile[]\n  directory: FileSystemDirectoryHandle //LikeFile[]\n): Promise<FileSystemFileHandle[]> {\n  const files: FileSystemFileHandle[] = [] // {name: string, kind: string, getFile: () => File}[] = []\n  for await (const entry of directory.values()) {\n    files.push(entry as any)\n  }\n  return files\n}","export const path = {\n  join: (...args: string[]) => {\n    return args.filter(value => value.length).join('/')\n  }\n}\n","import { BrowserDmFileReader } from \"./BrowserDmFileReader\"\nimport { copyFileInDir, DirectoryManager, findDirectoryWithin, getDirForFilePath, getNameByPath, renameFileInDir } from \"./DirectoryManagers\"\nimport { directoryReadToArray } from \"./directoryReadToArray.function\"\nimport { DmFileReader } from \"./DmFileReader\"\nimport { path } from \"./path\"\n\nexport class BrowserDirectoryManager implements DirectoryManager {\n  name: string\n\n  constructor(\n    public path: string,\n    public files: FileSystemFileHandle[], // LikeFile[],\n    public directoryHandler: FileSystemDirectoryHandle,\n  ) {\n    this.name = getNameByPath(path)\n  }\n\n  findDirectory (\n    path: string,\n    options?: FileSystemGetDirectoryOptions,\n  ): Promise<BrowserDirectoryManager | undefined> {\n    return findDirectoryWithin(path, this, options) as Promise<BrowserDirectoryManager | undefined>\n  }\n  \n  async list(): Promise<string[]> {\n    const files = await directoryReadToArray(this.directoryHandler)\n    return files.map(file => file.name)\n  }\n  \n  async listFolders(): Promise<string[]> {\n    const items = await directoryReadToArray(this.directoryHandler)\n    return items.filter((file: any) => file.kind && (file as any).kind === 'directory')\n      .map(file => file.name)\n  }\n  \n  async listFiles(): Promise<string[]> {\n    const items = await directoryReadToArray(this.directoryHandler)\n    return items.filter((file: any) => file.kind === 'file')\n      .map((file: any) => file.name)\n  }\n  \n  async getFolders(): Promise<DirectoryManager[]> {\n    const names = await this.listFolders()\n    return Promise.all(\n      names.map(async name => await this.getDirectory(name))\n    ) as Promise<DirectoryManager[]>\n  }\n  \n  async getFiles(): Promise<DmFileReader[]> {\n    const files = await directoryReadToArray(this.directoryHandler)\n    return files.filter(file => file.kind === 'file')\n      .map(file => new BrowserDmFileReader(file, this))\n  }\n\n  createDirectory(\n    newPath: string\n  ): Promise<DirectoryManager> {\n    return this.getDirectory(newPath, { create: true })\n  }\n\n  async getDirectory(\n    newPath: string,\n    options?: FileSystemGetDirectoryOptions\n  ): Promise<BrowserDirectoryManager> {\n    if ( !newPath ) {\n      return this\n    }\n\n    const newPathArray = newPath.split(/\\\\|\\//)\n    let fullNewPath = this.path\n    let dir: FileSystemDirectoryHandle\n\n    try {\n      // traverse through each folder\n      dir  = await newPathArray.reduce(async (last,current) => {\n        const next: FileSystemDirectoryHandle = await last\n        const newHandle = next.getDirectoryHandle(current, options)\n        const name = (await newHandle).name\n        fullNewPath = path.join(fullNewPath, name)\n        return newHandle\n      }, Promise.resolve(this.directoryHandler))\n    } catch (err: any) {\n      throw new Error(err.message + `. ${newPath} not found in ${this.name} (${this.path})`)\n    }\n\n    // TODO: We may not need to read files in advanced (originally we did this for safari)\n    const files: FileSystemFileHandle[] = await directoryReadToArray(dir)\n    const newDir = new BrowserDirectoryManager(\n      fullNewPath,\n      files,\n      dir\n    )\n    return newDir\n  }\n\n  async removeEntry(\n    name: string,\n    options?: { recursive: boolean }\n  ): Promise<void> {\n    const split = name.split(/\\\\|\\//)\n    const lastName = split.pop() as string // remove last item\n    const subDir = split.length >= 1\n    const dir = (subDir ? await this.getDirectory( split.join('/') ) : this) as BrowserDirectoryManager\n    return dir.directoryHandler.removeEntry(lastName, options)\n  }\n\n  async renameFile(\n    oldFileName: string,\n    newFileName: string\n  ): Promise<DmFileReader> {\n    return renameFileInDir(oldFileName, newFileName, this)\n  }\n\n  async copyFile(\n    oldFileName: string,\n    newFileName: string\n  ): Promise<DmFileReader> {\n    return copyFileInDir(oldFileName, newFileName, this)\n  }\n\n  async file(\n    path: string,\n    options?: FileSystemGetFileOptions,\n  ): Promise<DmFileReader> {\n    const findFile = await this.findFileByPath(path)\n    if ( findFile ) {\n      return findFile\n    }\n\n    const dirOptions = { create: options?.create }\n    const dir = await getDirForFilePath(path, this, dirOptions) as BrowserDirectoryManager\n    const fileName = path.split(/\\\\|\\//).pop() as string\n\n    const fileHandle = await dir.directoryHandler.getFileHandle(fileName, options)\n    return new BrowserDmFileReader(fileHandle, dir)\n  }\n\n  async findFileByPath(\n    path: string,\n    directoryHandler: any = this.directoryHandler,\n  ): Promise<BrowserDmFileReader | undefined> {\n    const pathSplit = path.split(/\\\\|\\//)\n    const fileName = pathSplit.pop() // pathSplit[ pathSplit.length-1 ]\n    let dir: BrowserDirectoryManager = this\n\n    // chrome we dig through the first selected directory and search the subs\n    if ( pathSplit.length ) {\n      const findDir = await this.findDirectory( pathSplit.join('/') )\n      \n      if ( !findDir ) {\n        return\n      }\n\n      dir = findDir\n      directoryHandler = dir.directoryHandler\n    }\n    \n    let files = this.files\n    files = await directoryReadToArray(directoryHandler)\n    const likeFile = files.find(file => file.name === fileName)\n    if ( !likeFile ) {\n      return\n    }\n    \n    // when found, convert to File\n    // const file = await this.getSystemFile(likeFile)\n    return new BrowserDmFileReader(likeFile, dir)\n  }  \n}\n","export function convertSlashes(string: string) {\n  return string.replace('\\\\','/')\n}\n","import { INeutralino, INeutralinoFs } from \"./Neutralino.utils\"\nimport { streamCallback } from \"./DmFileReader\"\n\ndeclare const Neutralino: INeutralino\nexport const fs = typeof Neutralino === 'object' ? Neutralino.filesystem : {} as INeutralinoFs\n\n/** Read a file in streams awaiting a callback to process each stream before reading another */\nexport async function readTextStream(\n  filePath: string,\n  callback: streamCallback,\n  // Below, if number is too low, Neutralino witnessed will fail NE_RT_NATRTER (hopefully its not a specific number used versus how much is available to stream in targeted file)\n  chunkSize = 1024 * 18,\n): Promise<void> {\n  let stopped = false\n  const stop = () => {\n    stopped = true\n  }\n\n  return new Promise(async (res, rej) => {\n    let offset = 0\n    const stats = await fs.getStats(filePath)\n    const size = stats.size\n\n    let close = () => {\n      Neutralino.events.off('openedFile', dataCallback)\n      res( undefined )\n      \n      // prevent calling callbacks twice by redeclaring them\n      const empty = () => undefined\n      close = empty\n      dataCallback = empty\n    }\n\n    // main callback used to read each stream of data. On close of stream, its re-declared as an empty function\n    let dataCallback = (evt: any) => {\n      if(evt.detail.id != fileId) {\n        return // this call is not for us\n      }\n\n      switch(evt.detail.action) {\n        case 'data':\n          const isLast = (offset + chunkSize) >= size\n          const percent = offset / size * 100\n          const string = evt.detail.data\n                      \n          try {\n            // if callback return promise, wait for it\n            return Promise.resolve( callback(string, { offset, isLast, percent, stop, cancel: stop }) )\n              .then(() => {\n                offset = offset + chunkSize // increase for next iteration\n\n                // are we done or shall we trigger the next read?\n                isLast || stopped ? close() : read()\n              })\n          } catch (err) {\n            rej(err)\n            return close() // error should force everything to stop\n          }\n        case 'end':\n          close() // indication of done by Neutralino\n          return\n      }\n    }\n\n    // used at every time we are ready to continue reading\n    const read = async () => {\n      try {\n        const ableToRead = size - (offset + chunkSize)\n        // prevent a trying to read more than their is file (otherwise odd trailing characters)\n        if ( ableToRead < 0 ) {\n          chunkSize = chunkSize + ableToRead\n        }\n\n        // no await here needed (dataCallback will be called)\n        await Neutralino.filesystem.updateOpenedFile(fileId, 'read', chunkSize)\n      } catch (err) {\n        rej(err)\n        close()\n      }  \n    }\n\n    // Create a callback calling callback so incase we need to prevent further calls we can switch out the first callback\n    const realCallback = (evt: any) => dataCallback(evt)\n\n    // start the actual processing\n    Neutralino.events.on('openedFile', realCallback)\n    const fileId = await Neutralino.filesystem.openFile( filePath )\n    read()\n  })\n}  \n\n/** Read a file in streams awaiting a callback to provide a string to write as new content for the original read file\n * 1. A blank file is created\n * 2. Original file is read in streams\n * 3. Result from callback is appended to the file in step 1\n * 4. When all of file is read we rename the original file\n * 5. The file we append all results to, is renamed to the original files name\n * 6. The original file, that was renamed, is now deleted\n * - All of the above must be performed as Neutralino does not support stream writing like the browser does\n*/\nexport async function readWriteFile(\n  filePath: string,\n  callback: streamCallback,\n  chunkSize: number = 1024 * 18 // Too low a number, can error. More details in file search for \"chunkSize\" in this file\n): Promise<void> {\n  const cloneFullPath = filePath + '.writing'\n  const renameFullPath = filePath + '.original'\n\n  // create an empty file we will stream results into\n  await Neutralino.filesystem.writeFile(cloneFullPath, '')\n\n  // create callback that will handle each part of the stream\n  const midware: streamCallback = (string, stats) => {\n    stats.cancel = () => {\n      stats.stop()\n      Neutralino.filesystem.removeFile(renameFullPath) // remove the safety file\n      Neutralino.filesystem.removeFile(cloneFullPath) // remove the clone.writing file we created\n    }\n\n    const newString = callback(string, stats)\n    \n    // no await\n    return Neutralino.filesystem.appendFile(cloneFullPath, newString)\n  }\n\n  // stream the entire file\n  await readTextStream(filePath, midware, chunkSize)\n\n  // rename original file just incase any issues with next step(s)\n  await Neutralino.filesystem.moveFile(filePath, renameFullPath)\n\n  // rename the file we stream wrote which ends in \".writing\"\n  await Neutralino.filesystem.moveFile(cloneFullPath, filePath)\n\n  // delete original file because we are done which ends in '.original'\n  await Neutralino.filesystem.removeFile(renameFullPath)\n}","import { FileStats } from \"./DirectoryManagers\"\nimport { BaseDmFileReader, DmFileReader, streamCallback } from \"./DmFileReader\"\nimport { fs, readTextStream, readWriteFile } from \"./Neutralino.streams\"\nimport { NeutralinoDirectoryManager } from \"./NeutralinoDirectoryManager\"\n\nexport class NeutralinoDmFileReader extends BaseDmFileReader implements DmFileReader {\n  name: string\n  \n  constructor(\n    public filePath: string,\n    public directory: NeutralinoDirectoryManager,\n  ) {\n    super()\n    this.name = filePath.split(/\\\\|\\//).pop() as string\n  }\n\n  async readTextStream(\n    callback: streamCallback,\n    chunkSize: number = 82944 // 1024 * 18 because low numbers cause issues\n  ): Promise<void> {\n    return readTextStream(this.filePath, callback, chunkSize)\n  }\n\n  async stats(): Promise<FileStats> {\n    const stats = await fs.getStats(this.filePath)\n    \n    const castedStats = {...stats} as any as FileStats\n    castedStats.name = castedStats.name || this.name\n    castedStats.lastModified = stats.modifiedAt\n    castedStats.type = stats.isFile ? 'file' : 'directory'\n    \n    return castedStats\n  }\n\n  override readAsText(): Promise<string> {\n    return fs.readFile(this.filePath) // .toString()\n  }\n  \n  async readAsDataURL(): Promise<string> {\n    const data = await fs.readBinaryFile(this.filePath)\n    const view = new Uint8Array(data)\n    \n    const decoded = String.fromCharCode(...view)\n    //const decoder = new TextDecoder('utf8')\n    //const decoded = decoder.decode(view)\n    \n    const b64encoded = btoa(decoded)\n\n    const ext = this.filePath.split('.').pop() as string\n    const dataType = getMimeType(ext)\n\n    const url = `data:${dataType};base64,` + b64encoded // remove `application/json;base64,`\n    return url\n  }\n\n  /**\n   * 1. Creates a file of a similar name and reads from source file\n   * 2. Writes to created via append commands\n   * 3. The original file is renamed on stream end\n   * 4. The new file is named to the original and then original file is then deleted */\n  async readWriteTextStream(\n    callback: streamCallback,\n    chunkSize: number = 1024 * 1024, // 1 MB\n  ): Promise<void> {\n    const pathTo = this.directory.path\n    const fullPath = pathTo + '/' + this.name\n    return readWriteFile(fullPath, callback, chunkSize)\n  }\n\n  async write(fileString: string | ArrayBuffer) {\n    return fs.writeFile(this.filePath, fileString)\n  }\n}\n\nfunction getMimeType(ext: string) {\n  switch (ext) {\n    case 'png':\n      return 'image/png'\n    case 'jpeg':\n    case 'jpg':\n      return 'image/png'\n  }\n\n  return 'application/json'\n}","import { convertSlashes } from \"./convertSlashes\"\nimport { DirectoryManager, findDirectoryWithin, getDirForFilePath, getNameByPath, renameFileInDir } from \"./DirectoryManagers\"\nimport { DmFileReader } from \"./DmFileReader\"\nimport { INeutralino } from \"./Neutralino.utils\"\nimport { NeutralinoDmFileReader } from \"./NeutralinoDmFileReader\"\nimport { path } from \"./path\"\n\ndeclare const Neutralino: INeutralino\n\nexport class NeutralinoDirectoryManager implements DirectoryManager {\n  name: string\n\n  constructor(\n    public path: string,\n  ) {\n    this.name = getNameByPath(path)\n  }\n\n  findDirectory (\n    path: string,\n    options?: FileSystemGetDirectoryOptions,\n  ): Promise<NeutralinoDirectoryManager | undefined> {\n    return findDirectoryWithin(path, this, options) as Promise<NeutralinoDirectoryManager | undefined>\n  }\n\n  async list(): Promise<string[]> {\n    const reads = await Neutralino.filesystem.readDirectory( this.path )\n    return reads.filter(read => !['.','..'].includes(read.entry)).map(read => read.entry)\n  }\n\n  async listFolders(): Promise<string[]> {\n    const reads = await Neutralino.filesystem.readDirectory( this.path )\n    return reads.filter(read => !['.','..'].includes(read.entry) && read.type === 'DIRECTORY')\n      .map(read => read.entry)\n  }\n\n  async listFiles(): Promise<string[]> {\n    const reads = await Neutralino.filesystem.readDirectory( this.path )\n    return reads.filter(read => !['.','..'].includes(read.entry) && read.type !== 'DIRECTORY')\n      .map(read => read.entry)\n  }\n\n  async getFolders(): Promise<NeutralinoDirectoryManager[]> {\n    return Promise.all(\n      (await this.listFolders()).map(async name => await this.getDirectory(name))\n    )\n  }\n\n  async getFiles(): Promise<DmFileReader[]> {\n    const reads = await Neutralino.filesystem.readDirectory( this.path )\n    return reads.filter(read => !['.','..'].includes(read.entry) && read.type !== 'DIRECTORY')\n      .map(read => new NeutralinoDmFileReader(this.getFullPath(read.entry), this))\n  }\n\n  async createDirectory(\n    newPath: string\n  ): Promise<NeutralinoDirectoryManager> {\n    try {\n      const fullPath = path.join(this.path, convertSlashes(newPath))\n      await Neutralino.filesystem.readDirectory( fullPath )\n\n      // it exists, just read it\n      return this.getDirectory(newPath)\n    } catch( err: any ){\n      if ( err.code === 'NE_FS_NOPATHE' ) {\n        const splitPath = convertSlashes(newPath).split('/')\n        let pathTo = this.path\n        \n        while( splitPath.length ) {\n          const nowName = splitPath.shift() as string\n          pathTo = path.join(pathTo, nowName)\n          await Neutralino.filesystem.createDirectory(pathTo)\n        }\n    \n        const fullPath = pathTo // path.join(this.path, newPath)\n        return new NeutralinoDirectoryManager( fullPath )    \n      }\n      throw err\n    }\n  }\n\n  async getDirectory(\n    newPath: string,\n    options?: FileSystemGetDirectoryOptions\n  ): Promise<NeutralinoDirectoryManager> {\n    if ( !newPath ) {\n      return this\n    }\n    \n    const pathTo = path.join(this.path, newPath)\n    \n    try {\n      // ensure path exists\n      await Neutralino.filesystem.readDirectory(pathTo)\n      return new NeutralinoDirectoryManager( pathTo )\n    } catch (err: any) {\n      if ( err.code === 'NE_FS_NOPATHE' && options?.create ) {\n        return this.createDirectory(newPath)\n      }\n      throw err // rethrow\n    }\n  }\n\n  async findFileByPath (\n    path: string,\n  ): Promise<NeutralinoDmFileReader | undefined> {\n    const pathSplit = path.split(/\\\\|\\//)\n    const fileName = (pathSplit.pop() as string).toLowerCase() // pathSplit[ pathSplit.length-1 ]\n    let dir: NeutralinoDirectoryManager = this\n\n    // chrome we dig through the first selected directory and search the subs\n    if ( pathSplit.length ) {\n      const findDir = await this.findDirectory( pathSplit.join('/') )\n      \n      if ( !findDir ) {\n        return\n      }\n      \n      dir = findDir\n    }\n    \n    const files = await dir.listFiles()\n    const matchName = files.find(listName => listName.toLowerCase() === fileName)\n    if ( !matchName ) {\n      return\n    }\n\n    const fullPath = dir.getFullPath(matchName)\n    return new NeutralinoDmFileReader(fullPath, dir)\n  }\n\n  async file(\n    pathTo: string,\n    options?: FileSystemGetFileOptions\n  ) {\n    const existingFile = await this.findFileByPath(pathTo)\n\n    if ( existingFile ) {\n      return existingFile\n    }\n\n    // TODO: This work should most likely only occur if the options.create flag is present otherwise throw not found error\n    const dirOptions = { create: options?.create }\n    const dir = await getDirForFilePath(pathTo, this, dirOptions) as NeutralinoDirectoryManager\n    const fileName = pathTo.split(/\\\\|\\//).pop() as string\n    const fullPath = path.join(dir.path, fileName)\n\n    return new NeutralinoDmFileReader(fullPath, dir)\n  }\n\n  getFullPath(itemPath: string) {\n    let fullFilePath = path.join(this.path, itemPath)\n    return convertSlashes(fullFilePath)\n  }\n\n  async copyFile(\n    oldFileName: string,\n    newFileName: string\n  ) {\n    const copyFrom = path.join(this.path, oldFileName)\n    const pasteTo = path.join(this.path, newFileName)\n    await Neutralino.filesystem.copyFile(copyFrom, pasteTo)\n    return await this.file(newFileName)\n  }\n\n  async renameFile(\n    oldFileName: string,\n    newFileName: string\n  ): Promise<DmFileReader> {\n    return renameFileInDir(oldFileName, newFileName, this)\n  }\n\n  async removeEntry(\n    name: string,\n    options?: { recursive: boolean }\n  ): Promise<void> {\n    const split = name.split(/\\\\|\\//)\n    const lastName = split.pop() as string // remove last item\n    const dir = split.length >= 1 ? await this.getDirectory( split.join('/') ) : this\n\n    const pathTo = path.join(dir.path, lastName)\n    \n    const fileNames = await dir.listFiles()\n    if ( fileNames.includes(lastName) ) {\n      return Neutralino.filesystem.removeFile(pathTo)\n    }\n        \n    try {\n      await Neutralino.filesystem.removeDirectory(pathTo)\n    } catch (err: any) {\n      // if folder delete failed, it may have items within Neutralino does not have recursive delete\n      if ( err.code === 'NE_FS_RMDIRER' && options?.recursive ) {\n        return recurseRemoveDir( await dir.getDirectory(lastName) )\n      }\n      throw err\n    }\n    return\n  }\n}\n\nasync function recurseRemoveDir(\n  dir: NeutralinoDirectoryManager\n) {\n  // remove all folders within\n  const folders = await dir.getFolders()\n  for (const subdir of folders) {\n    await recurseRemoveDir(subdir)\n  }\n\n  // remove all files within\n  const list = await dir.listFiles()\n  for (const fileName of list) {\n    await dir.removeEntry(fileName)\n  }\n\n  // try now to delete again\n  return Neutralino.filesystem.removeDirectory( dir.path )\n}","import { DirectoryManager, copyFileInDir, findDirectoryWithin, getNameByPath, renameFileInDir } from \"./DirectoryManagers\"\nimport { path } from \"./path\"\nimport { DmFileReader } from \"./DmFileReader\"\nimport { BrowserDmFileReader } from \"./BrowserDmFileReader\"\n\nexport class SafariDirectoryManager implements DirectoryManager {\n  name: string\n\n  constructor(\n    public path: string = '',\n    public files: File[],\n  ) {\n    this.name = getNameByPath(path)\n  }\n\n  async copyFile(\n    oldFileName: string,\n    newFileName: string\n  ) {\n    return copyFileInDir(oldFileName, newFileName, this)\n  }\n\n  async renameFile(\n    oldFileName: string,\n    newFileName: string\n  ) {\n    return renameFileInDir(oldFileName, newFileName, this)\n  }\n\n  /** ⚠️ does not actually work */\n  removeEntry(\n    _name: string,\n    _options?: { recursive: boolean }\n  ): Promise<void> {\n    throw 'removeEntry does not work in Safari'\n  }\n\n  findDirectory (\n    path: string,\n    options?: FileSystemGetDirectoryOptions,\n  ): Promise<DirectoryManager | undefined> {\n    return findDirectoryWithin(path, this, options)\n  }\n\n  /** ⚠️ does not actually work */\n  createDirectory(newPath: string) {\n    return this.getDirectory(newPath)\n  }\n\n  async getDirectory(path: string) {\n    // safari gives you all items up front\n    const nextItems = this.files.filter(file => {\n      const relative = getWebkitPathRelativeTo(file, this.path)\n      return relative.substring(0, path.length).toLowerCase() === path.toLowerCase()\n    })\n    return new SafariDirectoryManager(path, nextItems)\n  }\n\n  getRelativeItems() {\n    return this.files.filter(file => {\n      const relative = getWebkitPathRelativeTo(file, this.path)\n      return relative.split('/').length === 1 // lives within same directory\n    })\n  }\n\n  async list(): Promise<string[]> {\n    return this.getRelativeItems().map(file => file.name)\n  }\n\n  async listFolders(): Promise<string[]> {\n    return this.getRelativeItems()\n      .filter(file => file.name.split('.').length === 1)\n      .map(file => file.name)\n  }\n\n  async listFiles(): Promise<string[]> {\n    return this.getRelativeItems().map(file => file.name)\n  }\n  \n  async getFolders(): Promise<SafariDirectoryManager[]> {\n    return Promise.all(\n      (await this.listFolders()).map(async name => await this.getDirectory(name))\n    )\n  }\n\n  async getFiles(): Promise<DmFileReader[]> {\n    return this.getRelativeItems().map(file => new BrowserDmFileReader(file, this))\n  }\n\n  async findFileByPath (filePath: string ): Promise<BrowserDmFileReader | undefined> {\n    if ( !this.files.length ) {\n      return\n    }\n\n    // safari include the parent folder name so we need to prepend it to the file search\n    const rootName = this.files[0].webkitRelativePath.split('/').shift() as string\n    filePath = path.join(rootName, this.path, filePath)\n    \n    // safari just gives us every files upfront, find within that (huge) array\n    const file = this.files.find(file => file.webkitRelativePath === filePath) as File | undefined\n    return file ? new BrowserDmFileReader(file, this) : undefined\n  }\n\n  async file(fileName: string, _options?: FileSystemGetFileOptions) {\n    const findFile = await this.findFileByPath(fileName)\n\n    if ( findFile ) {\n      return findFile\n    }\n\n    const superFile = new BrowserDmFileReader(new File([], fileName), this)\n    return Promise.resolve(superFile)\n  }\n}\n\nfunction getWebkitPathRelativeTo(file: File, path: string) {\n  const relativeSplit = file.webkitRelativePath.split('/')\n  relativeSplit.shift() // remove the first notation on safari results\n  if ( path !== '' ) {\n    let splitCount = path.split('/').length\n    while (splitCount) {\n      relativeSplit.shift() // remove starting notations on safari results\n      --splitCount\n    }\n  }\n  return relativeSplit.join('/')\n}","import { Component, EventEmitter, Input, Output } from '@angular/core'\nimport { BrowserDirectoryManager } from '../../directory-managers/BrowserDirectoryManagers'\nimport { DirectoryManager } from '../../directory-managers/DirectoryManagers'\nimport { directoryReadToArray } from '../../directory-managers/directoryReadToArray.function'\nimport { FolderDialogOptions, INeutralino } from '../../directory-managers/Neutralino.utils'\nimport { NeutralinoDirectoryManager } from '../../directory-managers/NeutralinoDirectoryManager'\nimport { SafariDirectoryManager } from '../../directory-managers/SafariDirectoryManagers'\n\ndeclare const Neutralino: INeutralino\n\n@Component({\n  selector: 'robust-select-directory',\n  templateUrl: './robust-select-directory.component.html',\n})\nexport class RobustSelectDirectoryComponent {\n  @Input() label!: string // \"LaunchBox\"\n  @Input() pickerId?: string // ensures loaded path is same as previous\n  @Input() reloadPath?: string // C:\\blah\\blah\n  @Output() error = new EventEmitter<Error>()\n  @Input() directoryManager?: DirectoryManager\n  @Output() directoryManagerChange = new EventEmitter<DirectoryManager>()\n\n  getPickerId() {\n    return this.pickerId || this.getId().replace(/[ -_]/g,'')\n  }\n  \n  async onPathReload(path: string) {\n    if ( typeof Neutralino === 'object' ) {\n      const dm = new NeutralinoDirectoryManager(path)\n      this.directoryManagerChange.emit(this.directoryManager = dm)\n    }\n  }\n\n  async selectPath() {\n    const isNeu = typeof Neutralino === 'object'\n    if ( isNeu ) {\n      const options: FolderDialogOptions = {}\n\n      if ( this.reloadPath ) {\n        options.defaultPath = this.reloadPath\n      }\n\n      let response = await Neutralino.os.showFolderDialog(\n        'Select LaunchBox directory',\n        options\n      )\n\n      if ( response ) {\n        this.reloadPath = response\n        const dm = new NeutralinoDirectoryManager(response)\n        this.directoryManagerChange.emit(this.directoryManager = dm)\n      }\n      return\n    }\n\n    const canPickDir = window.showDirectoryPicker as any\n\n    // chrome\n    if ( canPickDir ) {  \n      try {\n        const boxDir = await window.showDirectoryPicker({\n          id: this.getPickerId(),\n          // id: this.getId(),\n          mode: 'readwrite'\n        })\n        const boxFiles = await directoryReadToArray( boxDir )\n        const dm = new BrowserDirectoryManager('', boxFiles, boxDir)\n        this.directoryManagerChange.emit(this.directoryManager = dm)\n        return\n      } catch (err: any) {\n        if ( err.message.includes('aborted') ) {\n          return\n        }\n        this.error.emit(err)\n      }\n    }\n\n    // safari\n    if ( this.showDirectoryPicker ) {\n      this.showDirectoryPicker()\n      return\n    }\n\n    let message = 'Cannot find supporting functionality to display a directory picker.'\n    if ( window.location.host.includes('0.0.0.0') ) {\n      message = message + ' Try using localhost instead of 0.0.0.0'\n    }\n\n    throw new Error(message)\n  }\n\n  getId() {\n    return 'robustFolderPicker-' + this.label\n  }\n\n  showDirectoryPicker() {\n    document.getElementById(this.getId())?.click()\n  }\n\n  // safari read directory\n  async readInputDirectory(input: any) {\n    if ( !input.files ) {\n      this.error.emit(new Error('no directory with files selected'))\n      return // no files selected\n    }\n\n    const files = Object.entries(input.files).filter(([key]) => key != 'length').map(([_key, value]) => value) as File[]\n    const dm = new SafariDirectoryManager('', files)\n    this.directoryManagerChange.emit(this.directoryManager = dm)\n  }\n}\n","<input class=\"hidden\" type=\"file\" directory accept=\".folder\" webkitdirectory\n  [id]=\"'robustFolderPicker-' + label\"\n  [name]=\"'robustFolderPicker-' + label\"\n  (change)=\"readInputDirectory($event.target)\"\n/>\n\n<button *ngIf=\"reloadPath\" type=\"button\" class=\"flex1\"\n  [title] = \"reloadPath\"\n  (click) = \"onPathReload(reloadPath)\"\n>🔄 Reload</button>\n\n<button type=\"button\" class=\"flex1\"\n  (click)=\"selectPath()\"\n  [class.opacity-80] = \"directoryManager\"\n>📁 {{ directoryManager ? 're' : '' }}select {{ label }} folder</button>\n\n<div *ngIf=\"reloadPath\" class=\"text-xs\">\n  <strong>{{ label }} path:</strong> {{ reloadPath }}\n</div>\n","import { RobustSelectDirectoryComponent } from \"./components/robust-select-directory/robust-select-directory.component\";\nexport { RobustSelectDirectoryComponent } from \"./components/robust-select-directory/robust-select-directory.component\";\n\nexport const declarations = [\n  RobustSelectDirectoryComponent,\n]\n","import {\n  ModuleWithProviders,\n  NgModule\n} from \"@angular/core\"\n\nimport { CommonModule } from \"@angular/common\"\nexport { CommonModule } from \"@angular/common\"\n\nimport { declarations as components } from \"./declarations\"\n\nconst declarations = [...components]\n\n@NgModule({\n  imports:[\n    CommonModule\n  ],\n  declarations,\n  exports: declarations\n}) export class AckComponentsModule {\n  static forRoot(): ModuleWithProviders<AckComponentsModule> {\n    return {\n      ngModule: AckComponentsModule,\n    }\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["readWriteFile","declarations","components","i1.RobustSelectDirectoryComponent"],"mappings":";;;;;AAEA;AACM,SAAU,cAAc,CAC5B,IAAU,EACV,YAAoB,IAAI,GAAG,IAAI;AAC/B,UAAA,GAA6B,CAAC,MAAc,KAAK,SAAS,EAC1D,EAAC,SAAS,GAAC,KAAK,EAAA,GAAmB,EAAE,EAAA;AAErC,IAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAA;IAC1B,IAAI,MAAM,GAAG,CAAC,CAAA;IACd,IAAI,OAAO,GAAG,KAAK,CAAA;IAEnB,OAAO,IAAI,OAAO,CAAO,CAAC,GAAG,EAAE,GAAG,KAAI;QACpC,MAAM,IAAI,GAAG,MAAK;YAChB,OAAO,GAAG,IAAI,CAAA;AAChB,SAAC,CAAA;QACD,MAAM,MAAM,GAAG,IAAI,CAAA;;AAGnB,QAAA,MAAM,MAAM,GAAG,OAAO,MAAc,KAAI;AACtC,YAAA,MAAM,OAAO,GAAG,UAAU,CACxB,MAAgB,EAAE;AAChB,gBAAA,MAAM,EAAE,CAAC,MAAM,GAAG,SAAS,KAAK,QAAQ;AACxC,gBAAA,OAAO,EAAE,MAAM,GAAG,QAAQ,GAAG,GAAG;gBAChC,MAAM;gBACN,IAAI;gBACJ,MAAM;AACP,aAAA,CACF,CAAA;AAED,YAAA,IAAK,SAAS,EAAG;AACf,gBAAA,MAAM,OAAO,CAAA;AACd,aAAA;;YAGD,MAAM,IAAI,SAAS,CAAA;AAEnB,YAAA,IAAI,CAAC,OAAO,IAAI,MAAM,GAAG,QAAQ,EAAE;AACjC,gBAAA,SAAS,EAAE,CAAA;AACZ,aAAA;AAAM,iBAAA;AACL,gBAAA,GAAG,EAAE,CAAA;AACN,aAAA;AACH,SAAC,CAAA;AAGD,QAAA,SAAS,SAAS,GAAA;AAChB,YAAA,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,GAAG,SAAS,CAAC,CAAA;;YAGpD,KAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,WAAW,IAAI,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;SACzE;AAED,QAAA,SAAS,EAAE,CAAA;AACb,KAAC,CAAC,CAAA;AACJ,CAAC;AAEM,eAAeA,eAAa,CACjC,IAAkB,EAClB,UAAgC,EAChC,WAGW;AACX,SAAS,GAAG,IAAI,GAAG,IAAI;AACvB,OAAuB,EAAA;IAEvB,MAAM,cAAc,GAAG,MAAM,UAAU,CAAC,cAAc,EAAE,CAAA;IACxD,MAAM,QAAQ,GAAmB,OAAO,MAAM,EAAE,KAAK,KAAI;AACvD,QAAA,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAA;AAC/B,QAAA,KAAK,CAAC,IAAI,GAAG,MAAK;YAChB,YAAY,EAAE,CAAA;YACd,cAAc,CAAC,KAAK,EAAE,CAAA;AACxB,SAAC,CAAA;AACD,QAAA,KAAK,CAAC,MAAM,GAAG,MAAK;YAClB,YAAY,EAAE,CAAA;YACd,cAAc,CAAC,KAAK,EAAE,CAAA;AACxB,SAAC,CAAA;AAED,QAAA,OAAO,cAAc,CAAC,KAAK,CACzB,MAAM,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CACjC,CAAA;AACH,KAAC,CAAA;IAED,MAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,SAAS,EAAE,OAAO,CAAC,CAAA;AACvD,IAAA,MAAM,cAAc,CAAC,KAAK,EAAE,CAAA;IAC5B,cAAc,CAAC,QAAQ,CAAA;AACzB;;ACvFM,SAAU,WAAW,CAAC,MAAc,EAAA;AACxC,IAAA,OAAO,IAAI,SAAS,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,UAAU,CAAC,CAAA;AACnE;;MC8Ca,gBAAgB,CAAA;IAC3B,MAAM,mCAAmC,CAAC,OAAe,EAAA;QACvD,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC,CAAA;AAC7D,QAAA,OAAO,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,WAAW,CAAE,EAAE,WAAW,CAAA;KAC3D;IAED,MAAM,wBAAwB,CAAC,OAAe,EAAA;AAC5C,QAAA,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAA;QAClC,OAAO,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,oBAAoB,CAAC,OAAO,CAAQ,CAAC,CAAA;KAC9D;IAED,MAAM,4BAA4B,CAAC,OAAe,EAAA;AAChD,QAAA,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAA;AAClC,QAAA,MAAM,QAAQ,GAAG,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,oBAAoB,CAAC,OAAO,CAAQ,CAAC,CAAA;AACvE,QAAA,OAAO,QAAQ,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,SAAS,CAAA;KACjD;AAED,IAAA,MAAM,SAAS,GAAA;AACb,QAAA,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,UAAU,EAAE,CAAA;AACtC,QAAA,OAAO,WAAW,CAAE,MAAM,CAAE,CAAA;KAC7B;AAED,IAAA,MAAM,UAAU,GAAA;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC,CAAA;KAC3C;IAED,UAAU,GAAA;AACR,QAAA,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAA;KACxE;AACF;;ACzEK,MAAO,mBAAoB,SAAQ,gBAAgB,CAAA;IAGvD,WACS,CAAA,IAAiC,EACjC,SAA2B,EAAA;AAElC,QAAA,KAAK,EAAE,CAAA;QAHA,IAAI,CAAA,IAAA,GAAJ,IAAI,CAA6B;QACjC,IAAS,CAAA,SAAA,GAAT,SAAS,CAAkB;AAGlC,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;KACtB;AAED,IAAA,MAAM,KAAK,GAAA;AACT,QAAA,OAAO,IAAI,CAAC,WAAW,EAAE,CAAA;KAC1B;IAED,MAAM,cAAc,CAClB,QAAwB,EACxB,SAAoB,GAAA,IAAI,EACxB,OAAuB,EAAA;AAEvB,QAAA,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,WAAW,EAAE,CAAA;QACrC,OAAO,cAAc,CAAC,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAA;KAC1D;IAED,MAAM,mBAAmB,CACvB,QAAwB,EACxB,YAAoB,IAAI,GAAG,IAAI;IAC/B,OAAuB,EAAA;AAEvB,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,IAA4B,CAAA;AAChD,QAAA,OAAOA,eAAa,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,CAAC,CAAA;KACjE;IAED,MAAM,KAAK,CAAC,UAAgC,EAAA;AAC1C,QAAA,IAAI,cAAmB,CAAA;AACvB,QAAA,MAAM,QAAQ,GAAQ,IAAI,CAAC,IAAI,CAAA;AAC/B,QAAA,MAAM,aAAa,GAAG,QAAQ,CAAC,eAAe,IAAI,MAAM,QAAQ,CAAC,eAAe,EAAE,KAAK,SAAS,CAAA;AAEhG,QAAA,IAAK,aAAa,EAAG;AACnB,YAAA,cAAc,GAAG,MAAM,QAAQ,CAAC,cAAc,EAAE,CAAA;AACjD,SAAA;AAAM,aAAA;;AAEL,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAC,GAAG,CAAC,GAAC,aAAa,CAAA;AAC/D,YAAA,MAAM,iBAAiB,GAAG;gBACxB,aAAa,EAAE,IAAI,CAAC,IAAI;AACxB;;;;;;;;AAQE;aACH,CAGA;YAAC,iBAAyB,CAAC,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAA;YAEhD,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,CAAA;AAEjE,YAAA,cAAc,GAAG,MAAM,MAAM,CAAC,cAAc,EAAE,CAAA;AAC/C,SAAA;;AAID,QAAA,MAAM,cAAc,CAAC,KAAK,CAAE,UAAU,CAAE,CAAA;;AAGxC,QAAA,MAAM,cAAc,CAAC,KAAK,EAAE,CAAA;KAC7B;AAEO,IAAA,MAAM,WAAW,GAAA;AACvB,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAW,CAAA;QAC7B,OAAO,IAAI,CAAC,OAAO,GAAG,MAAM,IAAI,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;KACnE;IAEQ,UAAU,GAAA;QACjB,OAAO,IAAI,OAAO,CAAC,OAAO,GAAG,EAAE,GAAG,KAAI;YACpC,IAAI;AACF,gBAAA,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAA;AAC/B,gBAAA,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,WAAW,EAAE,CAAA;gBACrC,MAAM,CAAC,iBAAiB,CAAA;AACxB,gBAAA,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;AACvB,gBAAA,MAAM,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,MAAM,CAAC,MAAgB,CAAC,CAAA;AACnD,aAAA;AAAC,YAAA,OAAO,GAAG,EAAE;gBACZ,GAAG,CAAC,GAAG,CAAC,CAAA;AACT,aAAA;AACH,SAAC,CAAC,CAAA;KACH;IAED,aAAa,GAAA;QACX,OAAO,IAAI,OAAO,CAAC,OAAO,GAAG,EAAE,GAAG,KAAI;YACpC,IAAI;AACF,gBAAA,IAAI,MAAM,GAAG,IAAI,UAAU,EAAE,CAAA;AAC7B,gBAAA,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,WAAW,EAAE,CAAA;AACrC,gBAAA,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAA;AAC1B,gBAAA,MAAM,CAAC,MAAM,GAAG,MAAK;AACnB,oBAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAgB,CAAA;;;;oBAItC,GAAG,CAAC,MAAM,CAAC,CAAA;AACb,iBAAC,CAAA;AACF,aAAA;AAAC,YAAA,OAAO,GAAG,EAAE;gBACZ,GAAG,CAAC,GAAG,CAAC,CAAA;AACT,aAAA;AACH,SAAC,CAAC,CAAA;KACH;AACF;;ACrDK,SAAU,aAAa,CAAC,IAAY,EAAA;IACxC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,EAAY,CAAA;IAC7C,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,EAAY,CAAA;AACzC,CAAC;AAEM,eAAe,mBAAmB,CACvC,IAAY,EACZ,KAAuB,EACvB,OAAuC,EAAA;AAEvC,IAAA,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAA;AAEhD,IAAA,IAAK,SAAS,CAAC,MAAM,IAAI,CAAC,EAAG;QAC3B,MAAM,WAAW,GAAG,SAAS,CAAC,KAAK,EAAY,CAAA;QAE/C,IAAI;YACF,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC,YAAY,CAAC,WAAW,CAAC,CAAA;YACpD,IAAK,CAAC,MAAM,EAAG;AACb,gBAAA,OAAM;AACP,aAAA;AACD,YAAA,OAAO,MAAM,mBAAmB,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,CAAA;AACvE,SAAA;AAAC,QAAA,OAAO,GAAG,EAAE;AACZ,YAAA,MAAM,UAAU,GAAG,MAAM,KAAK,CAAC,WAAW,EAAE,CAAA;AAC5C,YAAA,IAAK,UAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAG;gBACtC,MAAM,GAAG,CAAA;AACV,aAAA;AAED,YAAA,OAAM;AACP,SAAA;AACF,KAAA;IAED,OAAO,KAAK,CAAA;AACd,CAAC;AAEM,eAAe,eAAe,CACnC,WAAmB,EACnB,WAAmB,EACnB,GAAqB,EAAA;IAErB,MAAM,OAAO,GAAG,MAAM,aAAa,CAAC,WAAW,EAAE,WAAW,EAAE,GAAG,CAAC,CAAA;AAClE,IAAA,MAAM,GAAG,CAAC,WAAW,CAAC,WAAW,CAAC,CAAA;AAClC,IAAA,OAAO,OAAO,CAAA;AAChB,CAAC;AAEM,eAAe,aAAa,CACjC,WAAmB,EACnB,WAAmB,EACnB,GAAqB,EAAA;IAErB,MAAM,OAAO,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;AAC3C,IAAA,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,UAAU,EAAE,CAAA;AACvC,IAAA,MAAM,OAAO,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAA;AAC7D,IAAA,MAAM,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;AACzB,IAAA,OAAO,OAAO,CAAA;AAChB,CAAC;AAEM,eAAe,iBAAiB,CACrC,IAAY,EACZ,OAAyB,EACzB,OAAuC,EAAA;IAEvC,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;AACrC,IAAA,SAAS,CAAC,GAAG,EAAY,CAAA;IACzB,MAAM,eAAe,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IAE3C,OAAO,MAAM,OAAO,CAAC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC,CAAA;AAC7D;;AC9HO,eAAe,oBAAoB;AACxC;AACA,SAAoC;;AAEpC,IAAA,MAAM,KAAK,GAA2B,EAAE,CAAA;IACxC,WAAW,MAAM,KAAK,IAAI,SAAS,CAAC,MAAM,EAAE,EAAE;AAC5C,QAAA,KAAK,CAAC,IAAI,CAAC,KAAY,CAAC,CAAA;AACzB,KAAA;AACD,IAAA,OAAO,KAAK,CAAA;AACd;;ACTa,MAAA,IAAI,GAAG;AAClB,IAAA,IAAI,EAAE,CAAC,GAAG,IAAc,KAAI;AAC1B,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;KACpD;;;MCGU,uBAAuB,CAAA;AAGlC,IAAA,WAAA,CACS,IAAY,EACZ,KAA6B;IAC7B,gBAA2C,EAAA;QAF3C,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAQ;QACZ,IAAK,CAAA,KAAA,GAAL,KAAK,CAAwB;QAC7B,IAAgB,CAAA,gBAAA,GAAhB,gBAAgB,CAA2B;AAElD,QAAA,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,CAAA;KAChC;IAED,aAAa,CACX,IAAY,EACZ,OAAuC,EAAA;QAEvC,OAAO,mBAAmB,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAiD,CAAA;KAChG;AAED,IAAA,MAAM,IAAI,GAAA;QACR,MAAM,KAAK,GAAG,MAAM,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;AAC/D,QAAA,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,CAAA;KACpC;AAED,IAAA,MAAM,WAAW,GAAA;QACf,MAAM,KAAK,GAAG,MAAM,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;AAC/D,QAAA,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,IAAS,KAAK,IAAI,CAAC,IAAI,IAAK,IAAY,CAAC,IAAI,KAAK,WAAW,CAAC;aAChF,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,CAAA;KAC1B;AAED,IAAA,MAAM,SAAS,GAAA;QACb,MAAM,KAAK,GAAG,MAAM,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;AAC/D,QAAA,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,IAAS,KAAK,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;aACrD,GAAG,CAAC,CAAC,IAAS,KAAK,IAAI,CAAC,IAAI,CAAC,CAAA;KACjC;AAED,IAAA,MAAM,UAAU,GAAA;AACd,QAAA,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,WAAW,EAAE,CAAA;QACtC,OAAO,OAAO,CAAC,GAAG,CAChB,KAAK,CAAC,GAAG,CAAC,OAAM,IAAI,KAAI,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CACxB,CAAA;KACjC;AAED,IAAA,MAAM,QAAQ,GAAA;QACZ,MAAM,KAAK,GAAG,MAAM,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;AAC/D,QAAA,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;AAC9C,aAAA,GAAG,CAAC,IAAI,IAAI,IAAI,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAA;KACpD;AAED,IAAA,eAAe,CACb,OAAe,EAAA;AAEf,QAAA,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAA;KACpD;AAED,IAAA,MAAM,YAAY,CAChB,OAAe,EACf,OAAuC,EAAA;QAEvC,IAAK,CAAC,OAAO,EAAG;AACd,YAAA,OAAO,IAAI,CAAA;AACZ,SAAA;QAED,MAAM,YAAY,GAAG,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;AAC3C,QAAA,IAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAA;AAC3B,QAAA,IAAI,GAA8B,CAAA;QAElC,IAAI;;AAEF,YAAA,GAAG,GAAI,MAAM,YAAY,CAAC,MAAM,CAAC,OAAO,IAAI,EAAC,OAAO,KAAI;AACtD,gBAAA,MAAM,IAAI,GAA8B,MAAM,IAAI,CAAA;gBAClD,MAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAA;gBAC3D,MAAM,IAAI,GAAG,CAAC,MAAM,SAAS,EAAE,IAAI,CAAA;gBACnC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;AAC1C,gBAAA,OAAO,SAAS,CAAA;aACjB,EAAE,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAA;AAC3C,SAAA;AAAC,QAAA,OAAO,GAAQ,EAAE;AACjB,YAAA,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,OAAO,GAAG,CAAK,EAAA,EAAA,OAAO,iBAAiB,IAAI,CAAC,IAAI,CAAK,EAAA,EAAA,IAAI,CAAC,IAAI,CAAA,CAAA,CAAG,CAAC,CAAA;AACvF,SAAA;;AAGD,QAAA,MAAM,KAAK,GAA2B,MAAM,oBAAoB,CAAC,GAAG,CAAC,CAAA;QACrE,MAAM,MAAM,GAAG,IAAI,uBAAuB,CACxC,WAAW,EACX,KAAK,EACL,GAAG,CACJ,CAAA;AACD,QAAA,OAAO,MAAM,CAAA;KACd;AAED,IAAA,MAAM,WAAW,CACf,IAAY,EACZ,OAAgC,EAAA;QAEhC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;QACjC,MAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,EAAY,CAAA;AACtC,QAAA,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,IAAI,CAAC,CAAA;QAChC,MAAM,GAAG,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,YAAY,CAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,GAAG,IAAI,CAA4B,CAAA;QACnG,OAAO,GAAG,CAAC,gBAAgB,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAA;KAC3D;AAED,IAAA,MAAM,UAAU,CACd,WAAmB,EACnB,WAAmB,EAAA;QAEnB,OAAO,eAAe,CAAC,WAAW,EAAE,WAAW,EAAE,IAAI,CAAC,CAAA;KACvD;AAED,IAAA,MAAM,QAAQ,CACZ,WAAmB,EACnB,WAAmB,EAAA;QAEnB,OAAO,aAAa,CAAC,WAAW,EAAE,WAAW,EAAE,IAAI,CAAC,CAAA;KACrD;AAED,IAAA,MAAM,IAAI,CACR,IAAY,EACZ,OAAkC,EAAA;QAElC,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAA;AAChD,QAAA,IAAK,QAAQ,EAAG;AACd,YAAA,OAAO,QAAQ,CAAA;AAChB,SAAA;QAED,MAAM,UAAU,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,CAAA;QAC9C,MAAM,GAAG,GAAG,MAAM,iBAAiB,CAAC,IAAI,EAAE,IAAI,EAAE,UAAU,CAA4B,CAAA;QACtF,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG,EAAY,CAAA;AAEpD,QAAA,MAAM,UAAU,GAAG,MAAM,GAAG,CAAC,gBAAgB,CAAC,aAAa,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAA;AAC9E,QAAA,OAAO,IAAI,mBAAmB,CAAC,UAAU,EAAE,GAAG,CAAC,CAAA;KAChD;IAED,MAAM,cAAc,CAClB,IAAY,EACZ,gBAAwB,GAAA,IAAI,CAAC,gBAAgB,EAAA;QAE7C,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;QACrC,MAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,EAAE,CAAA;QAChC,IAAI,GAAG,GAA4B,IAAI,CAAA;;QAGvC,IAAK,SAAS,CAAC,MAAM,EAAG;AACtB,YAAA,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAE,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,CAAA;YAE/D,IAAK,CAAC,OAAO,EAAG;gBACd,OAAM;AACP,aAAA;YAED,GAAG,GAAG,OAAO,CAAA;AACb,YAAA,gBAAgB,GAAG,GAAG,CAAC,gBAAgB,CAAA;AACxC,SAAA;AAED,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;AACtB,QAAA,KAAK,GAAG,MAAM,oBAAoB,CAAC,gBAAgB,CAAC,CAAA;AACpD,QAAA,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAA;QAC3D,IAAK,CAAC,QAAQ,EAAG;YACf,OAAM;AACP,SAAA;;;AAID,QAAA,OAAO,IAAI,mBAAmB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAA;KAC9C;AACF;;ACxKK,SAAU,cAAc,CAAC,MAAc,EAAA;IAC3C,OAAO,MAAM,CAAC,OAAO,CAAC,IAAI,EAAC,GAAG,CAAC,CAAA;AACjC;;ACEO,MAAM,EAAE,GAAG,OAAO,UAAU,KAAK,QAAQ,GAAG,UAAU,CAAC,UAAU,GAAG,EAAmB,CAAA;AAE9F;AACO,eAAe,cAAc,CAClC,QAAgB,EAChB,QAAwB;AACxB;AACA,SAAS,GAAG,IAAI,GAAG,EAAE,EAAA;IAErB,IAAI,OAAO,GAAG,KAAK,CAAA;IACnB,MAAM,IAAI,GAAG,MAAK;QAChB,OAAO,GAAG,IAAI,CAAA;AAChB,KAAC,CAAA;IAED,OAAO,IAAI,OAAO,CAAC,OAAO,GAAG,EAAE,GAAG,KAAI;QACpC,IAAI,MAAM,GAAG,CAAC,CAAA;QACd,MAAM,KAAK,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;AACzC,QAAA,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAA;QAEvB,IAAI,KAAK,GAAG,MAAK;YACf,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,YAAY,CAAC,CAAA;YACjD,GAAG,CAAE,SAAS,CAAE,CAAA;;AAGhB,YAAA,MAAM,KAAK,GAAG,MAAM,SAAS,CAAA;YAC7B,KAAK,GAAG,KAAK,CAAA;YACb,YAAY,GAAG,KAAK,CAAA;AACtB,SAAC,CAAA;;AAGD,QAAA,IAAI,YAAY,GAAG,CAAC,GAAQ,KAAI;AAC9B,YAAA,IAAG,GAAG,CAAC,MAAM,CAAC,EAAE,IAAI,MAAM,EAAE;AAC1B,gBAAA,OAAM;AACP,aAAA;AAED,YAAA,QAAO,GAAG,CAAC,MAAM,CAAC,MAAM;AACtB,gBAAA,KAAK,MAAM;oBACT,MAAM,MAAM,GAAG,CAAC,MAAM,GAAG,SAAS,KAAK,IAAI,CAAA;AAC3C,oBAAA,MAAM,OAAO,GAAG,MAAM,GAAG,IAAI,GAAG,GAAG,CAAA;AACnC,oBAAA,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAA;oBAE9B,IAAI;;wBAEF,OAAO,OAAO,CAAC,OAAO,CAAE,QAAQ,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAE;6BACxF,IAAI,CAAC,MAAK;AACT,4BAAA,MAAM,GAAG,MAAM,GAAG,SAAS,CAAA;;AAG3B,4BAAA,MAAM,IAAI,OAAO,GAAG,KAAK,EAAE,GAAG,IAAI,EAAE,CAAA;AACtC,yBAAC,CAAC,CAAA;AACL,qBAAA;AAAC,oBAAA,OAAO,GAAG,EAAE;wBACZ,GAAG,CAAC,GAAG,CAAC,CAAA;AACR,wBAAA,OAAO,KAAK,EAAE,CAAA;AACf,qBAAA;AACH,gBAAA,KAAK,KAAK;oBACR,KAAK,EAAE,CAAA;oBACP,OAAM;AACT,aAAA;AACH,SAAC,CAAA;;AAGD,QAAA,MAAM,IAAI,GAAG,YAAW;YACtB,IAAI;gBACF,MAAM,UAAU,GAAG,IAAI,IAAI,MAAM,GAAG,SAAS,CAAC,CAAA;;gBAE9C,IAAK,UAAU,GAAG,CAAC,EAAG;AACpB,oBAAA,SAAS,GAAG,SAAS,GAAG,UAAU,CAAA;AACnC,iBAAA;;AAGD,gBAAA,MAAM,UAAU,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAA;AACxE,aAAA;AAAC,YAAA,OAAO,GAAG,EAAE;gBACZ,GAAG,CAAC,GAAG,CAAC,CAAA;AACR,gBAAA,KAAK,EAAE,CAAA;AACR,aAAA;AACH,SAAC,CAAA;;QAGD,MAAM,YAAY,GAAG,CAAC,GAAQ,KAAK,YAAY,CAAC,GAAG,CAAC,CAAA;;QAGpD,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,YAAY,CAAC,CAAA;QAChD,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAE,QAAQ,CAAE,CAAA;AAC/D,QAAA,IAAI,EAAE,CAAA;AACR,KAAC,CAAC,CAAA;AACJ,CAAC;AAED;;;;;;;;AAQE;AACK,eAAe,aAAa,CACjC,QAAgB,EAChB,QAAwB,EACxB,SAAoB,GAAA,IAAI,GAAG,EAAE;;AAE7B,IAAA,MAAM,aAAa,GAAG,QAAQ,GAAG,UAAU,CAAA;AAC3C,IAAA,MAAM,cAAc,GAAG,QAAQ,GAAG,WAAW,CAAA;;IAG7C,MAAM,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,CAAA;;AAGxD,IAAA,MAAM,OAAO,GAAmB,CAAC,MAAM,EAAE,KAAK,KAAI;AAChD,QAAA,KAAK,CAAC,MAAM,GAAG,MAAK;YAClB,KAAK,CAAC,IAAI,EAAE,CAAA;YACZ,UAAU,CAAC,UAAU,CAAC,UAAU,CAAC,cAAc,CAAC,CAAA;YAChD,UAAU,CAAC,UAAU,CAAC,UAAU,CAAC,aAAa,CAAC,CAAA;AACjD,SAAC,CAAA;QAED,MAAM,SAAS,GAAG,QAAQ,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;;QAGzC,OAAO,UAAU,CAAC,UAAU,CAAC,UAAU,CAAC,aAAa,EAAE,SAAS,CAAC,CAAA;AACnE,KAAC,CAAA;;IAGD,MAAM,cAAc,CAAC,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAC,CAAA;;IAGlD,MAAM,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAA;;IAG9D,MAAM,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAA;;IAG7D,MAAM,UAAU,CAAC,UAAU,CAAC,UAAU,CAAC,cAAc,CAAC,CAAA;AACxD;;ACnIM,MAAO,sBAAuB,SAAQ,gBAAgB,CAAA;IAG1D,WACS,CAAA,QAAgB,EAChB,SAAqC,EAAA;AAE5C,QAAA,KAAK,EAAE,CAAA;QAHA,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAQ;QAChB,IAAS,CAAA,SAAA,GAAT,SAAS,CAA4B;AAG5C,QAAA,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG,EAAY,CAAA;KACpD;IAED,MAAM,cAAc,CAClB,QAAwB,EACxB,SAAoB,GAAA,KAAK;;QAEzB,OAAO,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAA;KAC1D;AAED,IAAA,MAAM,KAAK,GAAA;QACT,MAAM,KAAK,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;AAE9C,QAAA,MAAM,WAAW,GAAG,EAAC,GAAG,KAAK,EAAqB,CAAA;QAClD,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAA;AAChD,QAAA,WAAW,CAAC,YAAY,GAAG,KAAK,CAAC,UAAU,CAAA;AAC3C,QAAA,WAAW,CAAC,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,MAAM,GAAG,WAAW,CAAA;AAEtD,QAAA,OAAO,WAAW,CAAA;KACnB;IAEQ,UAAU,GAAA;QACjB,OAAO,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;KAClC;AAED,IAAA,MAAM,aAAa,GAAA;QACjB,MAAM,IAAI,GAAG,MAAM,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;AACnD,QAAA,MAAM,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAA;QAEjC,MAAM,OAAO,GAAG,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,CAAA;;;AAI5C,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,CAAA;AAEhC,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAY,CAAA;AACpD,QAAA,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,CAAA;QAEjC,MAAM,GAAG,GAAG,CAAQ,KAAA,EAAA,QAAQ,UAAU,GAAG,UAAU,CAAA;AACnD,QAAA,OAAO,GAAG,CAAA;KACX;AAED;;;;AAIqF;IACrF,MAAM,mBAAmB,CACvB,QAAwB,EACxB,SAAoB,GAAA,IAAI,GAAG,IAAI,EAAA;AAE/B,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAA;QAClC,MAAM,QAAQ,GAAG,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAA;QACzC,OAAO,aAAa,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAA;KACpD;IAED,MAAM,KAAK,CAAC,UAAgC,EAAA;QAC1C,OAAO,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAA;KAC/C;AACF,CAAA;AAED,SAAS,WAAW,CAAC,GAAW,EAAA;AAC9B,IAAA,QAAQ,GAAG;AACT,QAAA,KAAK,KAAK;AACR,YAAA,OAAO,WAAW,CAAA;AACpB,QAAA,KAAK,MAAM,CAAC;AACZ,QAAA,KAAK,KAAK;AACR,YAAA,OAAO,WAAW,CAAA;AACrB,KAAA;AAED,IAAA,OAAO,kBAAkB,CAAA;AAC3B;;MC3Ea,0BAA0B,CAAA;AAGrC,IAAA,WAAA,CACS,IAAY,EAAA;QAAZ,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAQ;AAEnB,QAAA,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,CAAA;KAChC;IAED,aAAa,CACX,IAAY,EACZ,OAAuC,EAAA;QAEvC,OAAO,mBAAmB,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAoD,CAAA;KACnG;AAED,IAAA,MAAM,IAAI,GAAA;AACR,QAAA,MAAM,KAAK,GAAG,MAAM,UAAU,CAAC,UAAU,CAAC,aAAa,CAAE,IAAI,CAAC,IAAI,CAAE,CAAA;AACpE,QAAA,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,EAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAA;KACtF;AAED,IAAA,MAAM,WAAW,GAAA;AACf,QAAA,MAAM,KAAK,GAAG,MAAM,UAAU,CAAC,UAAU,CAAC,aAAa,CAAE,IAAI,CAAC,IAAI,CAAE,CAAA;QACpE,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,EAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC;aACvF,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAA;KAC3B;AAED,IAAA,MAAM,SAAS,GAAA;AACb,QAAA,MAAM,KAAK,GAAG,MAAM,UAAU,CAAC,UAAU,CAAC,aAAa,CAAE,IAAI,CAAC,IAAI,CAAE,CAAA;QACpE,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,EAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC;aACvF,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAA;KAC3B;AAED,IAAA,MAAM,UAAU,GAAA;AACd,QAAA,OAAO,OAAO,CAAC,GAAG,CAChB,CAAC,MAAM,IAAI,CAAC,WAAW,EAAE,EAAE,GAAG,CAAC,OAAM,IAAI,KAAI,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAC5E,CAAA;KACF;AAED,IAAA,MAAM,QAAQ,GAAA;AACZ,QAAA,MAAM,KAAK,GAAG,MAAM,UAAU,CAAC,UAAU,CAAC,aAAa,CAAE,IAAI,CAAC,IAAI,CAAE,CAAA;QACpE,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,EAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC;aACvF,GAAG,CAAC,IAAI,IAAI,IAAI,sBAAsB,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC,CAAA;KAC/E;IAED,MAAM,eAAe,CACnB,OAAe,EAAA;QAEf,IAAI;AACF,YAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC,CAAA;YAC9D,MAAM,UAAU,CAAC,UAAU,CAAC,aAAa,CAAE,QAAQ,CAAE,CAAA;;AAGrD,YAAA,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAA;AAClC,SAAA;AAAC,QAAA,OAAO,GAAQ,EAAE;AACjB,YAAA,IAAK,GAAG,CAAC,IAAI,KAAK,eAAe,EAAG;gBAClC,MAAM,SAAS,GAAG,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;AACpD,gBAAA,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAA;gBAEtB,OAAO,SAAS,CAAC,MAAM,EAAG;AACxB,oBAAA,MAAM,OAAO,GAAG,SAAS,CAAC,KAAK,EAAY,CAAA;oBAC3C,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;oBACnC,MAAM,UAAU,CAAC,UAAU,CAAC,eAAe,CAAC,MAAM,CAAC,CAAA;AACpD,iBAAA;AAED,gBAAA,MAAM,QAAQ,GAAG,MAAM,CAAA;AACvB,gBAAA,OAAO,IAAI,0BAA0B,CAAE,QAAQ,CAAE,CAAA;AAClD,aAAA;AACD,YAAA,MAAM,GAAG,CAAA;AACV,SAAA;KACF;AAED,IAAA,MAAM,YAAY,CAChB,OAAe,EACf,OAAuC,EAAA;QAEvC,IAAK,CAAC,OAAO,EAAG;AACd,YAAA,OAAO,IAAI,CAAA;AACZ,SAAA;AAED,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAA;QAE5C,IAAI;;YAEF,MAAM,UAAU,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;AACjD,YAAA,OAAO,IAAI,0BAA0B,CAAE,MAAM,CAAE,CAAA;AAChD,SAAA;AAAC,QAAA,OAAO,GAAQ,EAAE;YACjB,IAAK,GAAG,CAAC,IAAI,KAAK,eAAe,IAAI,OAAO,EAAE,MAAM,EAAG;AACrD,gBAAA,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAA;AACrC,aAAA;YACD,MAAM,GAAG,CAAA;AACV,SAAA;KACF;IAED,MAAM,cAAc,CAClB,IAAY,EAAA;QAEZ,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;QACrC,MAAM,QAAQ,GAAI,SAAS,CAAC,GAAG,EAAa,CAAC,WAAW,EAAE,CAAA;QAC1D,IAAI,GAAG,GAA+B,IAAI,CAAA;;QAG1C,IAAK,SAAS,CAAC,MAAM,EAAG;AACtB,YAAA,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAE,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,CAAA;YAE/D,IAAK,CAAC,OAAO,EAAG;gBACd,OAAM;AACP,aAAA;YAED,GAAG,GAAG,OAAO,CAAA;AACd,SAAA;AAED,QAAA,MAAM,KAAK,GAAG,MAAM,GAAG,CAAC,SAAS,EAAE,CAAA;AACnC,QAAA,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC,WAAW,EAAE,KAAK,QAAQ,CAAC,CAAA;QAC7E,IAAK,CAAC,SAAS,EAAG;YAChB,OAAM;AACP,SAAA;QAED,MAAM,QAAQ,GAAG,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,CAAA;AAC3C,QAAA,OAAO,IAAI,sBAAsB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAA;KACjD;AAED,IAAA,MAAM,IAAI,CACR,MAAc,EACd,OAAkC,EAAA;QAElC,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA;AAEtD,QAAA,IAAK,YAAY,EAAG;AAClB,YAAA,OAAO,YAAY,CAAA;AACpB,SAAA;;QAGD,MAAM,UAAU,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,CAAA;QAC9C,MAAM,GAAG,GAAG,MAAM,iBAAiB,CAAC,MAAM,EAAE,IAAI,EAAE,UAAU,CAA+B,CAAA;QAC3F,MAAM,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG,EAAY,CAAA;AACtD,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;AAE9C,QAAA,OAAO,IAAI,sBAAsB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAA;KACjD;AAED,IAAA,WAAW,CAAC,QAAgB,EAAA;AAC1B,QAAA,IAAI,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;AACjD,QAAA,OAAO,cAAc,CAAC,YAAY,CAAC,CAAA;KACpC;AAED,IAAA,MAAM,QAAQ,CACZ,WAAmB,EACnB,WAAmB,EAAA;AAEnB,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,CAAA;AAClD,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,CAAA;QACjD,MAAM,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAA;AACvD,QAAA,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;KACpC;AAED,IAAA,MAAM,UAAU,CACd,WAAmB,EACnB,WAAmB,EAAA;QAEnB,OAAO,eAAe,CAAC,WAAW,EAAE,WAAW,EAAE,IAAI,CAAC,CAAA;KACvD;AAED,IAAA,MAAM,WAAW,CACf,IAAY,EACZ,OAAgC,EAAA;QAEhC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;QACjC,MAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,EAAY,CAAA;QACtC,MAAM,GAAG,GAAG,KAAK,CAAC,MAAM,IAAI,CAAC,GAAG,MAAM,IAAI,CAAC,YAAY,CAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,GAAG,IAAI,CAAA;AAEjF,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;AAE5C,QAAA,MAAM,SAAS,GAAG,MAAM,GAAG,CAAC,SAAS,EAAE,CAAA;AACvC,QAAA,IAAK,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAG;YAClC,OAAO,UAAU,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAA;AAChD,SAAA;QAED,IAAI;YACF,MAAM,UAAU,CAAC,UAAU,CAAC,eAAe,CAAC,MAAM,CAAC,CAAA;AACpD,SAAA;AAAC,QAAA,OAAO,GAAQ,EAAE;;YAEjB,IAAK,GAAG,CAAC,IAAI,KAAK,eAAe,IAAI,OAAO,EAAE,SAAS,EAAG;gBACxD,OAAO,gBAAgB,CAAE,MAAM,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAE,CAAA;AAC5D,aAAA;AACD,YAAA,MAAM,GAAG,CAAA;AACV,SAAA;QACD,OAAM;KACP;AACF,CAAA;AAED,eAAe,gBAAgB,CAC7B,GAA+B,EAAA;;AAG/B,IAAA,MAAM,OAAO,GAAG,MAAM,GAAG,CAAC,UAAU,EAAE,CAAA;AACtC,IAAA,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE;AAC5B,QAAA,MAAM,gBAAgB,CAAC,MAAM,CAAC,CAAA;AAC/B,KAAA;;AAGD,IAAA,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,SAAS,EAAE,CAAA;AAClC,IAAA,KAAK,MAAM,QAAQ,IAAI,IAAI,EAAE;AAC3B,QAAA,MAAM,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAA;AAChC,KAAA;;IAGD,OAAO,UAAU,CAAC,UAAU,CAAC,eAAe,CAAE,GAAG,CAAC,IAAI,CAAE,CAAA;AAC1D;;MCpNa,sBAAsB,CAAA;IAGjC,WACS,CAAA,IAAA,GAAe,EAAE,EACjB,KAAa,EAAA;QADb,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAa;QACjB,IAAK,CAAA,KAAA,GAAL,KAAK,CAAQ;AAEpB,QAAA,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,CAAA;KAChC;AAED,IAAA,MAAM,QAAQ,CACZ,WAAmB,EACnB,WAAmB,EAAA;QAEnB,OAAO,aAAa,CAAC,WAAW,EAAE,WAAW,EAAE,IAAI,CAAC,CAAA;KACrD;AAED,IAAA,MAAM,UAAU,CACd,WAAmB,EACnB,WAAmB,EAAA;QAEnB,OAAO,eAAe,CAAC,WAAW,EAAE,WAAW,EAAE,IAAI,CAAC,CAAA;KACvD;;IAGD,WAAW,CACT,KAAa,EACb,QAAiC,EAAA;AAEjC,QAAA,MAAM,qCAAqC,CAAA;KAC5C;IAED,aAAa,CACX,IAAY,EACZ,OAAuC,EAAA;QAEvC,OAAO,mBAAmB,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAA;KAChD;;AAGD,IAAA,eAAe,CAAC,OAAe,EAAA;AAC7B,QAAA,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAA;KAClC;IAED,MAAM,YAAY,CAAC,IAAY,EAAA;;QAE7B,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,IAAG;YACzC,MAAM,QAAQ,GAAG,uBAAuB,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;AACzD,YAAA,OAAO,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,WAAW,EAAE,CAAA;AAChF,SAAC,CAAC,CAAA;AACF,QAAA,OAAO,IAAI,sBAAsB,CAAC,IAAI,EAAE,SAAS,CAAC,CAAA;KACnD;IAED,gBAAgB,GAAA;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,IAAG;YAC9B,MAAM,QAAQ,GAAG,uBAAuB,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;AACzD,YAAA,OAAO,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,KAAK,CAAC,CAAA;AACzC,SAAC,CAAC,CAAA;KACH;AAED,IAAA,MAAM,IAAI,GAAA;AACR,QAAA,OAAO,IAAI,CAAC,gBAAgB,EAAE,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,CAAA;KACtD;AAED,IAAA,MAAM,WAAW,GAAA;QACf,OAAO,IAAI,CAAC,gBAAgB,EAAE;AAC3B,aAAA,MAAM,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;aACjD,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,CAAA;KAC1B;AAED,IAAA,MAAM,SAAS,GAAA;AACb,QAAA,OAAO,IAAI,CAAC,gBAAgB,EAAE,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,CAAA;KACtD;AAED,IAAA,MAAM,UAAU,GAAA;AACd,QAAA,OAAO,OAAO,CAAC,GAAG,CAChB,CAAC,MAAM,IAAI,CAAC,WAAW,EAAE,EAAE,GAAG,CAAC,OAAM,IAAI,KAAI,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAC5E,CAAA;KACF;AAED,IAAA,MAAM,QAAQ,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,gBAAgB,EAAE,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAA;KAChF;IAED,MAAM,cAAc,CAAE,QAAgB,EAAA;AACpC,QAAA,IAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAG;YACxB,OAAM;AACP,SAAA;;AAGD,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,EAAY,CAAA;AAC9E,QAAA,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;;AAGnD,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,kBAAkB,KAAK,QAAQ,CAAqB,CAAA;AAC9F,QAAA,OAAO,IAAI,GAAG,IAAI,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,SAAS,CAAA;KAC9D;AAED,IAAA,MAAM,IAAI,CAAC,QAAgB,EAAE,QAAmC,EAAA;QAC9D,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAA;AAEpD,QAAA,IAAK,QAAQ,EAAG;AACd,YAAA,OAAO,QAAQ,CAAA;AAChB,SAAA;AAED,QAAA,MAAM,SAAS,GAAG,IAAI,mBAAmB,CAAC,IAAI,IAAI,CAAC,EAAE,EAAE,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAA;AACvE,QAAA,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA;KAClC;AACF,CAAA;AAED,SAAS,uBAAuB,CAAC,IAAU,EAAE,IAAY,EAAA;IACvD,MAAM,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;AACxD,IAAA,aAAa,CAAC,KAAK,EAAE,CAAA;IACrB,IAAK,IAAI,KAAK,EAAE,EAAG;QACjB,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAA;AACvC,QAAA,OAAO,UAAU,EAAE;AACjB,YAAA,aAAa,CAAC,KAAK,EAAE,CAAA;AACrB,YAAA,EAAE,UAAU,CAAA;AACb,SAAA;AACF,KAAA;AACD,IAAA,OAAO,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AAChC;;MChHa,8BAA8B,CAAA;AAJ3C,IAAA,WAAA,GAAA;AAQY,QAAA,IAAA,CAAA,KAAK,GAAG,IAAI,YAAY,EAAS,CAAA;AAEjC,QAAA,IAAA,CAAA,sBAAsB,GAAG,IAAI,YAAY,EAAoB,CAAA;AA0FxE,KAAA;IAxFC,WAAW,GAAA;AACT,QAAA,OAAO,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC,OAAO,CAAC,QAAQ,EAAC,EAAE,CAAC,CAAA;KAC1D;IAED,MAAM,YAAY,CAAC,IAAY,EAAA;AAC7B,QAAA,IAAK,OAAO,UAAU,KAAK,QAAQ,EAAG;AACpC,YAAA,MAAM,EAAE,GAAG,IAAI,0BAA0B,CAAC,IAAI,CAAC,CAAA;YAC/C,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC,CAAA;AAC7D,SAAA;KACF;AAED,IAAA,MAAM,UAAU,GAAA;AACd,QAAA,MAAM,KAAK,GAAG,OAAO,UAAU,KAAK,QAAQ,CAAA;AAC5C,QAAA,IAAK,KAAK,EAAG;YACX,MAAM,OAAO,GAAwB,EAAE,CAAA;YAEvC,IAAK,IAAI,CAAC,UAAU,EAAG;AACrB,gBAAA,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAA;AACtC,aAAA;AAED,YAAA,IAAI,QAAQ,GAAG,MAAM,UAAU,CAAC,EAAE,CAAC,gBAAgB,CACjD,4BAA4B,EAC5B,OAAO,CACR,CAAA;AAED,YAAA,IAAK,QAAQ,EAAG;AACd,gBAAA,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAA;AAC1B,gBAAA,MAAM,EAAE,GAAG,IAAI,0BAA0B,CAAC,QAAQ,CAAC,CAAA;gBACnD,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC,CAAA;AAC7D,aAAA;YACD,OAAM;AACP,SAAA;AAED,QAAA,MAAM,UAAU,GAAG,MAAM,CAAC,mBAA0B,CAAA;;AAGpD,QAAA,IAAK,UAAU,EAAG;YAChB,IAAI;AACF,gBAAA,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,mBAAmB,CAAC;AAC9C,oBAAA,EAAE,EAAE,IAAI,CAAC,WAAW,EAAE;;AAEtB,oBAAA,IAAI,EAAE,WAAW;AAClB,iBAAA,CAAC,CAAA;AACF,gBAAA,MAAM,QAAQ,GAAG,MAAM,oBAAoB,CAAE,MAAM,CAAE,CAAA;gBACrD,MAAM,EAAE,GAAG,IAAI,uBAAuB,CAAC,EAAE,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAA;gBAC5D,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC,CAAA;gBAC5D,OAAM;AACP,aAAA;AAAC,YAAA,OAAO,GAAQ,EAAE;gBACjB,IAAK,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAG;oBACrC,OAAM;AACP,iBAAA;AACD,gBAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AACrB,aAAA;AACF,SAAA;;QAGD,IAAK,IAAI,CAAC,mBAAmB,EAAG;YAC9B,IAAI,CAAC,mBAAmB,EAAE,CAAA;YAC1B,OAAM;AACP,SAAA;QAED,IAAI,OAAO,GAAG,qEAAqE,CAAA;QACnF,IAAK,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAG;AAC9C,YAAA,OAAO,GAAG,OAAO,GAAG,yCAAyC,CAAA;AAC9D,SAAA;AAED,QAAA,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAA;KACzB;IAED,KAAK,GAAA;AACH,QAAA,OAAO,qBAAqB,GAAG,IAAI,CAAC,KAAK,CAAA;KAC1C;IAED,mBAAmB,GAAA;QACjB,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAA;KAC/C;;IAGD,MAAM,kBAAkB,CAAC,KAAU,EAAA;AACjC,QAAA,IAAK,CAAC,KAAK,CAAC,KAAK,EAAG;YAClB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC,CAAA;AAC9D,YAAA,OAAM;AACP,SAAA;AAED,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,KAAK,CAAW,CAAA;QACpH,MAAM,EAAE,GAAG,IAAI,sBAAsB,CAAC,EAAE,EAAE,KAAK,CAAC,CAAA;QAChD,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC,CAAA;KAC7D;;2HA/FU,8BAA8B,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAA9B,8BAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,8BAA8B,gQCd3C,8rBAmBA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,IAAA,EAAA,QAAA,EAAA,QAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA,CAAA,EAAA,CAAA,CAAA;2FDLa,8BAA8B,EAAA,UAAA,EAAA,CAAA;kBAJ1C,SAAS;+BACE,yBAAyB,EAAA,QAAA,EAAA,8rBAAA,EAAA,CAAA;8BAI1B,KAAK,EAAA,CAAA;sBAAb,KAAK;gBACG,QAAQ,EAAA,CAAA;sBAAhB,KAAK;gBACG,UAAU,EAAA,CAAA;sBAAlB,KAAK;gBACI,KAAK,EAAA,CAAA;sBAAd,MAAM;gBACE,gBAAgB,EAAA,CAAA;sBAAxB,KAAK;gBACI,sBAAsB,EAAA,CAAA;sBAA/B,MAAM;;;AEjBI,MAAAC,cAAY,GAAG;IAC1B,8BAA8B;;;ACMhC,MAAM,YAAY,GAAG,CAAC,GAAGC,cAAU,CAAC,CAAA;MAQpB,mBAAmB,CAAA;AACjC,IAAA,OAAO,OAAO,GAAA;QACZ,OAAO;AACL,YAAA,QAAQ,EAAE,mBAAmB;SAC9B,CAAA;KACF;;gHALa,mBAAmB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;AAAnB,mBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,mBAAmB,4DAJ/B,YAAY,CAAA,EAAA,OAAA,EAAA,CAAAC,8BAAA,CAAA,EAAA,CAAA,CAAA;AAIA,mBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,mBAAmB,YAJ/B,YAAY,CAAA,EAAA,CAAA,CAAA;2FAIA,mBAAmB,EAAA,UAAA,EAAA,CAAA;kBANlC,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,OAAO,EAAC;wBACN,YAAY;AACb,qBAAA;oBACD,YAAY;AACZ,oBAAA,OAAO,EAAE,YAAY;AACtB,iBAAA,CAAA;;;AClBD;;AAEG;;;;"}